<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // js脚本就是一个宏任务
      // MessageChannel也是一个宏任务
      var channel = new MessageChannel();
      // 像电话机一样有两个端口既可发送信息给别人，也可以接收别人的信息
      // 你发我收，我发你收
      var port1 = channel.port1;
      var port2 = channel.port2;
      port1.onmessage = function (event) {
        console.log('port1收到来自port2的数据：' + event.data);
      };
      port2.onmessage = function (event) {
        console.log('port2收到来自port1的数据：' + event.data);
      };
      port1.postMessage('发送给port2');
      port2.postMessage('发送给port1');
    </script>
  </body>
</html>
